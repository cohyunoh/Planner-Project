{% extends "base.html" %}
{% block title %}Home{% endblock %}
{% block content %}
<ul class="nav justify-content-end">
  <li class="nav-item">
    <form action="/news" method="GET">
      <button class="btn btn-sm btn-outline-primary mt-3 mr-3" type="submit">News</button>
    </form>
  </li>
  <li class="nav-item">
    <form action="/settings" method="GET">
      <button class="btn btn-sm btn-outline-primary mt-3 mr-3" type="submit">Settings</button>
    </form>
  </li>
  <li class="nav-item">
    <form action="/logout" method="GET">
      <button class="btn btn-sm btn-outline-primary mt-3 mr-3" type="submit">Logout</button>
    </form>
  </li>
</ul>
<div class="jumbotron jumbotron-fluid mt-3">
  <div class="container">
    <h1 class="display-4">Today is {{ datetime.strftime("%Y-%m-%d") }}</h1>
    <hr class="my-4">
    <p class="lead">Welcome back {{ name }}!</p>
  </div>
</div>
<div class="row mx-3">
  <div class="container mx-3 col-sm">
    <h3 class="text-center">Calendar</h3>
    <div class="list-group">
      {% for event in calendar %}
      <li class="list-group-item row">
        <form class="col form-inline" action="/remove">
          <input type="hidden" name="event_id" value="{{ event['id'] }}">
          <label class="col">{{ event["summary"] }}</label>
          <input class="btn btn-outline-primary btn-sm" type="submit" value="Delete">
        </form>
      </li>
      {% endfor %}
    </div>
  </div>
  <div class="container mx-3 col-sm">
    <h3 class="text-center">Tasks</h3>
    {% for taskchain in tasks %}
    {% if "items" in taskchain %}
    <div class="list-group">
      {% for task in taskchain["items"] %}
      <li href="{{ task['selfLink'] }}" class="list-group-item row">
        <form class="col form-inline" action="/remove">
          <input type="hidden" name="task_id" value="{{ task['id'] }}">
          <label class="col">{{ task["title"] }}</label>
          <input class="btn btn-outline-primary btn-sm" type="submit" value="Delete">
        </form>
      </li>
      {% endfor %}
    </div>
    {% endif %}
    {% endfor %}
  </div>
  <div class="container mx-3 col-sm">
    <h3 class="text-center">News</h3>
    <div class="list-group">
      {% for article in news["data"]["children"] %}
      <a href="{{ article['data']['url'] }}" class="list-group-item list-group-item-action">
        {{ article["data"]["title"] }}
      </a>
      {% endfor %}
      <form class="list-group-item text-center" action="/news">
        <input class="btn btn-outline-primary btn-sm" type="submit" value="View More">
      </form>
    </div>
  </div>
</div>
{% endblock %}